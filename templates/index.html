<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Multi Subtitle App</title>
  <link rel="stylesheet" href="/static/css/style.css"/>
</head>
<body>
  <header>
    <div class="branding">
      <h1>Multi Subtitle App</h1>
      <p>Upload â†’ Auto Subtitles (Whisper: Korean only) â†’ Translate â†’ Streaming glossary.</p>
    </div>
    <div class="eco" aria-label="Eco Mileage">
      <span class="emoji" aria-hidden="true">ğŸŒ¿</span>
      <span class="label">Eco Mileage</span>
      <span id="ecoPoints" class="points">0 pts</span>
    </div>
  </header>

  <main class="grid">
    <!-- Left -->
    <section class="panel left" id="uploader">
      <h2>1) Upload & Options</h2>

      <div id="dropzone" class="dropzone" tabindex="0" aria-label="Drop video here">
        <p>Drag & drop video here<br/><small>(Max {{ max_size }} MB)</small></p>
        <input type="file" id="fileInput" accept="video/*"/>
      </div>

      <!-- Whisper ê²½ë¡œ: ì²´í¬í•œ ë§Œí¼ ìƒì„± -->
      <label class="block">Target subtitle languages (ì²´í¬í•œ ë§Œí¼ ìƒì„±):</label>
      <div id="langOptionsA" class="lang-grid">
        <label><input type="checkbox" class="langOptA" value="en" checked> English (ì˜ì–´)</label>
        <label><input type="checkbox" class="langOptA" value="zh"> Chinese (ì¤‘êµ­ì–´)</label>
        <label><input type="checkbox" class="langOptA" value="vi"> Vietnamese (ë² íŠ¸ë‚¨ì–´)</label>
        <label><input type="checkbox" class="langOptA" value="th"> Thai (íƒœêµ­ì–´)</label>
        <label><input type="checkbox" class="langOptA" value="uz"> Uzbek (ìš°ì¦ˆë² í¬ì–´)</label>
        <label><input type="checkbox" class="langOptA" value="tl"> Filipino / Tagalog (í•„ë¦¬í•€ì–´)</label>
        <label><input type="checkbox" class="langOptA" value="ja"> Japanese (ì¼ë³¸ì–´)</label>
        <label><input type="checkbox" class="langOptA" value="ko"> Korean (í•œêµ­ì–´)</label>
      </div>
      <input id="langs" type="hidden" value="en"/>
      <button id="startBtn">Start (with Whisper)</button>

      <hr class="divider"/>

      <!-- Skip-Whisper (ì˜ìƒ+SRT ì—…ë¡œë“œ) -->
      <div class="subupload">
        <h3>Upload Video + SRT (Skip Whisper)</h3>
        <label>Video file</label>
        <input type="file" id="fileInput2Video" accept="video/*"/>
        <label>SRT file</label>
        <input type="file" id="fileInput2Srt" accept=".srt,text/plain"/>

        <div class="row">
          <label for="srtLang">SRT language:</label>
          <select id="srtLang">
            <option value="ko" selected>í•œêµ­ì–´ (ko)</option>
            <option value="en">ì˜ì–´ (en)</option>
            <option value="zh">ì¤‘êµ­ì–´ (zh)</option>
            <option value="vi">ë² íŠ¸ë‚¨ì–´ (vi)</option>
            <option value="th">íƒœêµ­ì–´ (th)</option>
            <option value="uz">ìš°ì¦ˆë² í¬ì–´ (uz)</option>
            <option value="tl">í•„ë¦¬í•€ì–´ (tl)</option>
            <option value="ja">ì¼ë³¸ì–´ (ja)</option>
          </select>
        </div>

        <label class="block">Target subtitle languages (ì²´í¬í•œ ë§Œí¼ ìƒì„±):</label>
        <div id="langOptionsB" class="lang-grid">
          <label><input type="checkbox" class="langOptB" value="en" checked> English (ì˜ì–´)</label>
          <label><input type="checkbox" class="langOptB" value="zh"> Chinese (ì¤‘êµ­ì–´)</label>
          <label><input type="checkbox" class="langOptB" value="vi"> Vietnamese (ë² íŠ¸ë‚¨ì–´)</label>
          <label><input type="checkbox" class="langOptB" value="th"> Thai (íƒœêµ­ì–´)</label>
          <label><input type="checkbox" class="langOptB" value="uz"> Uzbek (ìš°ì¦ˆë² í¬ì–´)</label>
          <label><input type="checkbox" class="langOptB" value="tl"> Filipino / Tagalog (í•„ë¦¬í•€ì–´)</label>
          <label><input type="checkbox" class="langOptB" value="ja"> Japanese (ì¼ë³¸ì–´)</label>
          <label><input type="checkbox" class="langOptB" value="ko"> Korean (í•œêµ­ì–´)</label>
        </div>
        <input id="langs2" type="hidden" value="en"/>

        <button id="startBtn2">Start (skip Whisper)</button>
      </div>

      <div class="status">
        <div id="progressBar"><span id="progressFill" style="width:0%"></span></div>
        <div id="statusMsg">Waitingâ€¦</div>
      </div>
    </section>

    <!-- Center -->
    <section class="panel center">
      <h2>2) Player</h2>
      <div class="player-wrap">
        <video id="video" controls crossorigin="anonymous"></video>
        <div class="track-controls">
          <label for="trackLang">Subtitle:</label>
          <select id="trackLang"></select>
        </div>
        <div class="subs-center">
          <pre id="srtView" class="code"></pre>
        </div>
      </div>
    </section>

    <!-- Right -->
    <section class="panel right">
      <h2>3) Glossary Stream</h2>
      <div class="terms"><ul id="termList"></ul></div>
    </section>
  </main>

  <script src="/static/js/app.js"></script>
</body>
</html>
